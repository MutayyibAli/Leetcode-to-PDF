<div class='cpp-solution'><h2>Short C++, read words on the fly -- Votes: 332</h2><p>I think all previous C++ solutions read all words into a vector at the start. Here I read them on the fly.</p>
<div class="codehilite"><pre><span></span><code><span class="n">bool</span><span class="w"> </span><span class="n">wordPattern</span><span class="p">(</span><span class="n">string</span><span class="w"> </span><span class="n">pattern</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="nf">str</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="k">map</span><span class="o">&lt;</span><span class="nc">char</span><span class="p">,</span><span class="w"> </span><span class="nc">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">p2i</span><span class="p">;</span>
<span class="w">    </span><span class="k">map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="nc">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">w2i</span><span class="p">;</span>
<span class="w">    </span><span class="n">istringstream</span><span class="w"> </span><span class="ow">in</span><span class="p">(</span><span class="nf">str</span><span class="p">);</span>
<span class="w">    </span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pattern</span><span class="p">.</span><span class="k">size</span><span class="p">();</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">string</span><span class="w"> </span><span class="n">word</span><span class="p">;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">word</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">p2i</span><span class="o">[</span><span class="n">pattern[i</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">w2i</span><span class="o">[</span><span class="n">word</span><span class="o">]</span><span class="p">)</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
<span class="w">        </span><span class="n">p2i</span><span class="o">[</span><span class="n">pattern[i</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">w2i</span><span class="o">[</span><span class="n">word</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>
<span class="err">}</span>
</code></pre></div></div>


<div class='python-solution'><h2>Short in Python -- Votes: 294</h2><p>This problem is pretty much equivalent to <a href="https://leetcode.com/problems/isomorphic-strings/">Isomorphic Strings</a>. Let me reuse two old solutions.</p>
<p>From <a href="https://leetcode.com/discuss/36438/1-liner-in-python?show=39070#c39070">here</a>:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">def</span><span class="w"> </span><span class="nv">wordPattern</span><span class="ss">(</span><span class="nv">self</span>,<span class="w"> </span><span class="nv">pattern</span>,<span class="w"> </span><span class="nv">str</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">pattern</span>
<span class="w">    </span><span class="nv">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">str</span>.<span class="nv">split</span><span class="ss">()</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">map</span><span class="ss">(</span><span class="nv">s</span>.<span class="nv">find</span>,<span class="w"> </span><span class="nv">s</span><span class="ss">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">map</span><span class="ss">(</span><span class="nv">t</span>.<span class="nv">index</span>,<span class="w"> </span><span class="nv">t</span><span class="ss">)</span>
</code></pre></div>

<p>Improved version also from there:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">def</span><span class="w"> </span><span class="nv">wordPattern</span><span class="ss">(</span><span class="nv">self</span>,<span class="w"> </span><span class="nv">pattern</span>,<span class="w"> </span><span class="nv">str</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lambda</span><span class="w"> </span><span class="nv">s</span>:<span class="w"> </span><span class="nv">map</span><span class="ss">(</span>{}.<span class="nv">setdefault</span>,<span class="w"> </span><span class="nv">s</span>,<span class="w"> </span><span class="nv">range</span><span class="ss">(</span><span class="nv">len</span><span class="ss">(</span><span class="nv">s</span><span class="ss">)))</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">f</span><span class="ss">(</span><span class="nv">pattern</span><span class="ss">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">f</span><span class="ss">(</span><span class="nv">str</span>.<span class="nv">split</span><span class="ss">())</span>
</code></pre></div>

<p>From <a href="https://leetcode.com/discuss/41379/1-line-in-python?show=41382#a41382">here</a>:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">def</span><span class="w"> </span><span class="nv">wordPattern</span><span class="ss">(</span><span class="nv">self</span>,<span class="w"> </span><span class="nv">pattern</span>,<span class="w"> </span><span class="nv">str</span><span class="ss">)</span>:
<span class="w">    </span><span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">pattern</span>
<span class="w">    </span><span class="nv">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">str</span>.<span class="nv">split</span><span class="ss">()</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nv">len</span><span class="ss">(</span><span class="nv">set</span><span class="ss">(</span><span class="nv">zip</span><span class="ss">(</span><span class="nv">s</span>,<span class="w"> </span><span class="nv">t</span><span class="ss">)))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">len</span><span class="ss">(</span><span class="nv">set</span><span class="ss">(</span><span class="nv">s</span><span class="ss">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">len</span><span class="ss">(</span><span class="nv">set</span><span class="ss">(</span><span class="nv">t</span><span class="ss">))</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">len</span><span class="ss">(</span><span class="nv">s</span><span class="ss">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">len</span><span class="ss">(</span><span class="nv">t</span><span class="ss">)</span>
</code></pre></div>

<p>Thanks to zhang38 for pointing out the need to check len(s) == len(t) here.</p></div><p style="page-break-before: always" ></p>