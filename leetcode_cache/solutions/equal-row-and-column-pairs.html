<div class='cpp-solution'><h4>100% fast, easy understanding. [Votes: 123]</h4><pre><code>class Solution {
public:
    int equalPairs(vector&lt;vector&lt;int&gt;&gt;&amp; grid) 
    {
        // Number to store the count of equal pairs.
        int ans = 0;
        map&lt;vector&lt;int&gt;, int&gt; mp;
        // Storing each row int he map
        for (int i = 0; i &lt; grid.size(); i++)
            mp[grid[i]]++;

        for (int i = 0; i &lt; grid[0].size(); i++)
        {
            vector&lt;int&gt; v;
            // extracting column in a vector.
            for (int j = 0; j &lt; grid.size(); j++)
                v.push_back(grid[j][i]);
            // Add the number of times that column appeared as a row.
            ans += mp[v];
        }
        // Return the number of count
        return ans;
    }
};
</code></pre>
<p>Hope you like it.</p></div><div class='python-solution'><h4>Python3     ||    3 lines,  transpose, Ctr w/ explanation    ||    T/S: 97% / 71% [Votes: 86]</h4><p>Consider this grid for an example:</p>
<pre><code>           grid = [[1,2,1,9]
                   [2,8,9,2]
                   [1,2,1,9]
                   [9,2,6,3]]
</code></pre>
<p>Here's the plan:
- Determine<code>tpse</code>, the transpose of<code>grid</code>(using<code>zip(*grid)</code>):</p>
<pre><code>           tspe = [[1,2,1,9] 
                   [2,8,2,2]
                   [1,9,1,6]
                   [9,2,9,3]]
</code></pre>
<ul>
<li>The problem now is to determine the pairs of identical rows, one row in <code>tpse</code>and the other in<code>grid</code>. We hash<code>grid</code>and<code>tspe</code>:</li>
</ul>
<pre><code>          Counter(tuple(grid)):
               {(1,2,1,9): 2, (2,8,9,2): 1, (9,2,6,3): 1}

           Counter(zip(*grid)):
            {(1,2,1,9): 1, (2,8,2,2): 1, (1,9,1,6): 1, (9,2,9,3): 1}
</code></pre>
<p>â€¢ Finally, we determine the number of pairs:</p>
<pre><code>       (1,2,1,9): 2 and (1,2,1,9): 1    =&gt; 2x1 = 2
</code></pre>
<p>Here's the code:</p>
<pre><code>class Solution:                                
    def equalPairs(self, grid: List[List[int]]) -&gt; int:

        tpse = Counter(zip(*grid))                  #### &lt;-- determine the transpose
                                                    ####     and hash the rows

        grid = Counter(map(tuple,grid))             #### &lt;-- hash the rows of grid. (Note the tuple-map, so
                                                    ####     we can compare apples w/ apples in next step.)

        return  sum(tpse[t]*grid[t] for t in tpse)  #### &lt;-- compute the number of identical pairs
</code></pre>
<p><a href="https://leetcode.com/problems/equal-row-and-column-pairs/submissions/1287382373/">https://leetcode.com/problems/equal-row-and-column-pairs/submissions/1287382373/</a></p>
<p>I could be wrong, but I think that time complexity is <em>O</em>(<em>N</em>) and space complexity is <em>O</em>(<em>N</em>), in which <em>N</em> ~ the count of elements in <code>grid</code>.</p></div>