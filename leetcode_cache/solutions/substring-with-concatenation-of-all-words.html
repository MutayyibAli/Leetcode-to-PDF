<div class='cpp-solution'><h2>Easy Two-Map Solution (C++/Java) -- Votes: 457</h2><p>I think the following code is self-explanatory enough. We use an <code>unordered_map&lt;string, int&gt; counts</code> to record the expected times of each word and another <code>unordered_map&lt;string, int&gt; seen</code> to record the times we have seen. Then we check for every possible position of <code>i</code>. Once we meet an unexpected word or the times of some word is larger than its expected times, we stop the check. If we finish the check successfully, push <code>i</code> to the result <code>indexes</code>.</p>
<ul>
<li>C++</li>
</ul>
<p>class Solution {<br />
  public:<br />
  vector<int> findSubstring(string s, vector<string>&amp; words) {<br />
  unordered_map\<string, int> counts;<br />
  for (string word : words)<br />
  counts[word]++;<br />
  int n = s.length(), num = words.size(), len = words[0].length();<br />
  vector<int> indexes;<br />
  for (int i = 0; i &lt; n - num * len + 1; i++) {<br />
  unordered_map\<string, int> seen;<br />
  int j = 0;<br />
  for (; j &lt; num; j++) {<br />
  string word = s.substr(i + j * len, len);<br />
  if (counts.find(word) != counts.end()) {<br />
  seen[word]++;<br />
  if (seen[word] &gt; counts[word])<br />
  break;<br />
  }<br />
  else break;<br />
  }<br />
  if (j == num) indexes.push_back(i);<br />
  }<br />
  return indexes;<br />
  }<br />
  };</p>
<ul>
<li>Java</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="n">Solution</span> {
    <span class="n">public</span> <span class="nb">List</span><span class="s">&lt;Integer&gt;</span> <span class="n">findSubstring</span>(<span class="n">String</span> <span class="nb">s</span>, <span class="n">String</span> <span class="nb">words</span>) {
        <span class="n">final</span> <span class="nb">Map</span><span class="s">&lt;String, Integer&gt;</span> <span class="n">counts</span> = <span class="nb">new</span> <span class="n">HashMap</span><span class="s">&lt;&gt;();</span>
<span class="s">        for (final String word : words) {</span>
<span class="s">            counts.put(word, counts.getOrDefault(word, 0) + 1);</span>
<span class="s">        }</span>
<span class="s">        final List&lt;Integer&gt;</span> <span class="n">indexes</span> = <span class="nb">new</span> <span class="n">ArrayList</span><span class="s">&lt;&gt;();</span>
<span class="s">        final int n = s.length(), num = words.length, len = words[0].length();</span>
<span class="s">        for (int i = 0; i &lt; n - num * len + 1; i++) {</span>
<span class="s">            final Map&lt;String, Integer&gt;</span> <span class="n">seen</span> = <span class="nb">new</span> <span class="n">HashMap</span>&lt;&gt;();
            <span class="n">int</span> <span class="n">j</span> = <span class="mi">0</span>;
            <span class="k">while</span> (<span class="n">j</span> &lt; <span class="n">num</span>) {
                <span class="n">final</span> <span class="n">String</span> <span class="n">word</span> = <span class="nb">s</span>.<span class="n">substring</span>(<span class="n">i</span> + <span class="n">j</span> * <span class="n">len</span>, <span class="n">i</span> + (<span class="n">j</span> + <span class="mi">1</span>) * <span class="n">len</span>);
                <span class="k">if</span> (<span class="n">counts</span>.<span class="n">containsKey</span>(<span class="n">word</span>)) {
                    <span class="n">seen</span>.<span class="nb">put</span>(<span class="n">word</span>, <span class="n">seen</span>.<span class="n">getOrDefault</span>(<span class="n">word</span>, <span class="mi">0</span>) + <span class="mi">1</span>);
                    <span class="k">if</span> (<span class="n">seen</span>.<span class="nb">get</span>(<span class="n">word</span>) &gt; <span class="n">counts</span>.<span class="n">getOrDefault</span>(<span class="n">word</span>, <span class="mi">0</span>)) {
                        <span class="nb">break</span>;
                    }
                } <span class="k">else</span> {
                    <span class="nb">break</span>;
                }
                <span class="n">j</span>++;
            }
            <span class="k">if</span> (<span class="n">j</span> == <span class="n">num</span>) {
                <span class="n">indexes</span>.<span class="nb">add</span>(<span class="n">i</span>);
            }
        }
        <span class="k">return</span> <span class="n">indexes</span>;
    }
}
</code></pre></div></div>


<div class='python-solution'><h2>Python || Easily Understood âœ… || Faster than 96% || Less than 78% || O(nm) -- Votes: 60</h2><p>Method: <code>Hash Table</code></p>
<p>First we can create a <code>dict</code> to store the occurrence times for each word in <code>words</code>.</p>
<p>For example,<br />
If <code>s = "barfoofoobarthefoobarman"</code> and <code>words = ["bar","foo","the"]</code>,<br />
the dict will be <code>word_count = {'bar': 1, 'foo': 1, 'the': 1}</code>,</p>
<p>Since all the strings stored in <code>words</code> have the same length, the size of <strong>sliding window</strong> will be the word length of a single string. In the example above, the <strong>sliding window</strong> will be <code>3</code></p>
<p></p>
<div class="codehilite"><pre><span></span><code><span class="n">bar</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">man</span>
<span class="n">ignore</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">arf</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">oof</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">oob</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">art</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">hef</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">oob</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">arm</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ignore</span><span class="w"> </span><span class="n">an</span>
<span class="n">ignore</span><span class="w"> </span><span class="n">ba</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">rfo</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ofo</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">oba</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">rth</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">efo</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">oba</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">rma</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ignore</span><span class="w"> </span><span class="n">n</span>
</code></pre></div>

<p>Then, we can scan <code>s</code> in these 3 ways one by one</p>
<p>Let the word in <strong>sliding window</strong> be <code>word</code>.<br />
Also, we will create a <code>queue</code> to store the scan history.</p>
<div class="codehilite"><pre><span></span><code><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">word_count</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>
<span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">word_count</span><span class="o">[</span><span class="n">word</span><span class="o">]</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">words</span>
<span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">queue</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>

<span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="n">word_count</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>
<span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">queue</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
<span class="w">        </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">queue</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">word</span>
<span class="w">            </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">queue</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">queue</span><span class="p">.</span><span class="n">pop</span><span class="p">())</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="k">Only</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">beginning</span><span class="w"> </span><span class="n">word</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">dropped</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">remaining</span><span class="w"> </span><span class="n">words</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">use</span>
<span class="w">            </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">break</span>
<span class="w">        </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">queue</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">word</span>
<span class="w">            </span><span class="err">#</span><span class="w"> </span><span class="n">Since</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">beginning</span><span class="w"> </span><span class="n">word</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">dropped</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nf">count</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">beginning</span><span class="w"> </span><span class="n">word</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="mf">1.</span>
<span class="w">            </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">word_dict</span><span class="o">[</span><span class="n">last_element</span><span class="o">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">                </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">word_dict</span><span class="o">[</span><span class="n">last_element</span><span class="o">]</span><span class="w"> </span><span class="n">exceeds</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">original</span><span class="w"> </span><span class="k">value</span><span class="p">,</span><span class="w"> </span><span class="n">reset</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">whole</span><span class="w"> </span><span class="n">word_dict</span>
<span class="w">            </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">continue</span>
</code></pre></div>

<p>Code:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">deque</span><span class="p">,</span> <span class="n">defaultdict</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">findSubstring</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">words</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="n">word_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">words</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">ori_word_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
            <span class="n">ori_word_dict</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">all_word_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">words</span><span class="p">)</span> <span class="o">*</span> <span class="n">word_len</span>
        <span class="n">result</span> <span class="o">=</span> 
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">word_len</span><span class="p">):</span>
            <span class="n">queue</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
            <span class="n">word_dict</span> <span class="o">=</span> <span class="n">ori_word_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">-</span> <span class="n">word_len</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">word_len</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">:</span><span class="n">j</span> <span class="o">+</span> <span class="n">word_len</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">word_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">word_dict</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
                    <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">word_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="n">all_word_len</span> <span class="o">+</span> <span class="n">word_len</span><span class="p">)</span>
                        <span class="n">last_element</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
                        <span class="n">word_dict</span><span class="p">[</span><span class="n">last_element</span><span class="p">]</span> <span class="o">=</span> <span class="n">word_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">last_element</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">queue</span><span class="p">):</span>
                        <span class="n">last_element</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">last_element</span> <span class="o">==</span> <span class="n">word</span><span class="p">:</span>
                            <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
                            <span class="k">break</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">word_dict</span><span class="p">[</span><span class="n">last_element</span><span class="p">]</span> <span class="o">=</span> <span class="n">word_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">last_element</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
                            <span class="k">if</span> <span class="n">word_dict</span><span class="p">[</span><span class="n">last_element</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ori_word_dict</span><span class="p">[</span><span class="n">last_element</span><span class="p">]:</span>
                                <span class="n">word_dict</span> <span class="o">=</span> <span class="n">ori_word_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">result</span>
</code></pre></div>

<p>Let <code>n</code> be the length of a word in <code>words</code><br />
and <code>m</code> be the total number of words in <code>words</code></p>
<p><strong>Time complexity</strong>: <code>O(n * m)</code><br />
<strong>Space complexity</strong>: <code>O(n + m)</code><br />
<br/></p></div><p style="page-break-before: always" ></p>