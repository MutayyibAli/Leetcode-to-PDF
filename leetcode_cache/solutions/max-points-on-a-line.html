<div class='cpp-solution'><h2>Sharing my simple solution with explanation -- Votes: 281</h2><div class="codehilite"><pre><span></span><code><span class="nc">int</span><span class="w"> </span><span class="n">maxPoints</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">points</span><span class="p">)</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="nc">int</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">points</span><span class="p">.</span><span class="k">size</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="err">{</span>
<span class="w">        </span><span class="nc">int</span><span class="w"> </span><span class="n">samePoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="n">unordered_map</span><span class="o">&lt;</span><span class="k">double</span><span class="p">,</span><span class="w"> </span><span class="nc">int</span><span class="o">&gt;</span><span class="w"> </span><span class="k">map</span><span class="p">;</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="nc">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">points</span><span class="p">.</span><span class="k">size</span><span class="p">();</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="err">{</span>
<span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">points</span><span class="o">[</span><span class="n">j</span><span class="o">]</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">points</span><span class="o">[</span><span class="n">j</span><span class="o">]</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="err">{</span>
<span class="w">                </span><span class="n">samePoint</span><span class="o">++</span><span class="p">;</span>
<span class="w">            </span><span class="err">}</span>
<span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">points</span><span class="o">[</span><span class="n">j</span><span class="o">]</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="err">{</span>
<span class="w">                </span><span class="k">map</span><span class="o">[</span><span class="n">INT_MAX</span><span class="o">]++</span><span class="p">;</span>
<span class="w">            </span><span class="err">}</span>
<span class="w">            </span><span class="k">else</span><span class="err">{</span>
<span class="w">                </span><span class="k">double</span><span class="w"> </span><span class="n">slope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">double</span><span class="p">(</span><span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">points</span><span class="o">[</span><span class="n">j</span><span class="o">]</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">double</span><span class="p">(</span><span class="n">points</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">points</span><span class="o">[</span><span class="n">j</span><span class="o">]</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
<span class="w">                </span><span class="k">map</span><span class="o">[</span><span class="n">slope</span><span class="o">]++</span><span class="p">;</span>
<span class="w">            </span><span class="err">}</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">        </span><span class="nc">int</span><span class="w"> </span><span class="n">localMax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="n">auto</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">map</span><span class="p">.</span><span class="k">begin</span><span class="p">();</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">map</span><span class="p">.</span><span class="k">end</span><span class="p">();</span><span class="w"> </span><span class="n">it</span><span class="o">++</span><span class="p">)</span><span class="err">{</span>
<span class="w">            </span><span class="n">localMax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">localMax</span><span class="p">,</span><span class="w"> </span><span class="n">it</span><span class="o">-&gt;</span><span class="k">second</span><span class="p">);</span>
<span class="w">        </span><span class="err">}</span>
<span class="w">        </span><span class="n">localMax</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">samePoint</span><span class="p">;</span>
<span class="w">        </span><span class="k">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="k">result</span><span class="p">,</span><span class="w"> </span><span class="n">localMax</span><span class="p">);</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">result</span><span class="p">;</span>
<span class="err">}</span>
</code></pre></div>

<p>First, let's talk about mathematics.</p>
<p>How to determine if three points are on the same line?</p>
<p>The answer is to see if slopes of arbitrary two pairs are the same.</p>
<p>Second, let's see what the minimum time complexity can be.</p>
<p>Definitely, O(n^2). It's because you have to calculate all slopes between any two points.</p>
<p>Then let's go back to the solution of this problem.</p>
<p>In order to make this discussion simpler, let's pick a random point A as an example.</p>
<p>Given point A, we need to calculate all slopes between A and other points. There will be three cases:</p>
<ol>
<li>
<p>Some other point is the same as point A.</p>
</li>
<li>
<p>Some other point has the same x coordinate as point A, which will result to a positive infinite slope.</p>
</li>
<li>
<p>General case. We can calculate slope.</p>
</li>
</ol>
<p>We can store all slopes in a hash table. And we find which slope shows up mostly. Then add the number of same points to it. Then we know the maximum number of points on the same line for point A.</p>
<p>We can do the same thing to point B, point C...</p>
<p>Finally, just return the maximum result among point A, point B, point C...</p></div>


<div class='python-solution'><h2>[Python 3] Using Slopes and Hash Tables | Clean Python solution -- Votes: 124</h2><p><strong>Concept</strong>: A set of points are on a line each of their pair-wise slopes has the same value.</p>
<p>For each point, we iterate through all the other points and find the slope with each of the other points and store the number of pairs which have the same slope and find the max of the number of points.</p>
<p><strong>Time Complexity:</strong> O(N^2)<br />
<strong>Space Complexity:</strong> O(N) as we track only N-1 lines in total.</p>
<p><strong>Do UPVOTE if you found it helpful</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nl">Solution</span><span class="p">:</span>
<span class="w">    </span><span class="n">def</span><span class="w"> </span><span class="n">maxPoints</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="nl">points</span><span class="p">:</span><span class="w"> </span><span class="n">List</span><span class="o">[</span><span class="n">List[int</span><span class="o">]</span><span class="err">]</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">int</span><span class="err">:</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nf">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">2</span><span class="err">:</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nf">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>

<span class="w">        </span><span class="n">def</span><span class="w"> </span><span class="n">find_slope</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="p">)</span><span class="err">:</span>
<span class="w">            </span><span class="n">x1</span><span class="p">,</span><span class="w"> </span><span class="n">y1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p1</span>
<span class="w">            </span><span class="n">x2</span><span class="p">,</span><span class="w"> </span><span class="n">y2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p2</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">x1</span><span class="o">-</span><span class="n">x2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="err">:</span>
<span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">inf</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">y1</span><span class="o">-</span><span class="n">y2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x1</span><span class="o">-</span><span class="n">x2</span><span class="p">)</span>

<span class="w">        </span><span class="n">ans</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">p1</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">enumerate</span><span class="p">(</span><span class="n">points</span><span class="p">)</span><span class="err">:</span>
<span class="w">            </span><span class="n">slopes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">defaultdict</span><span class="p">(</span><span class="nc">int</span><span class="p">)</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">enumerate</span><span class="p">(</span><span class="n">points</span><span class="o">[</span><span class="n">i+1:</span><span class="o">]</span><span class="p">)</span><span class="err">:</span>
<span class="w">                </span><span class="n">slope</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">find_slope</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="p">)</span>
<span class="w">                </span><span class="n">slopes</span><span class="o">[</span><span class="n">slope</span><span class="o">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">                </span><span class="n">ans</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">slopes</span><span class="o">[</span><span class="n">slope</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">ans</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ans</span><span class="o">+</span><span class="mi">1</span>
</code></pre></div></div><p style="page-break-before: always" ></p>