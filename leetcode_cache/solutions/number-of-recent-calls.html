<div class='cpp-solution'><h4>Beats 100% âœ…ðŸ”¥(Both time and space) | Java, Python, C++ | Detailed Explanation [Votes: 104]</h4><h4>Intuition</h4>
<p>The goal of the RecentCounter class is to count the number of requests that occurred in the last <code>3000</code> milliseconds (ms). Each time a request is made (using the ping method), we record the time and maintain a count of all requests within the last <code>3000</code> ms. By efficiently tracking only the relevant requests, we can quickly compute the <code>result</code>.</p>
<h4>Approach</h4>
<ol>
<li><code>Data Structure</code>: Use an array <code>records</code> to store timestamps of requests. The start and end indices mark the window of valid requests within the last <code>3000</code> ms.</li>
<li><code>ping(int t)</code> Method:<ul>
<li><strong>Add Timestamp</strong>: Insert the current timestamp t at the position indicated by <code>end</code>.</li>
<li><strong>Remove Outdated Requests</strong>: Increment the <code>start</code> index until the requests are within the <code>3000</code> ms window (<code>t - records[start] &lt;= 3000</code>).</li>
<li><strong>Count Valid Requests</strong>: Return the count of requests within the window (<code>end - start</code>), which represents the number of valid requests in the last 3000 ms.</li>
</ul>
</li>
</ol>
<h4>Complexity</h4>
<ul>
<li>
<p>Time complexity: $$O(n)$$</p>
</li>
<li>
<p>Space complexity: $$O(1)$$</p>
</li>
</ul>
<h4>Code</h4>
<pre><code class="language-java">class RecentCounter {
    private static final int[] records = new int[10000]; //
    private int start;
    private int end;

    public RecentCounter() {        
        start = 0;
        end = 0;
    }

    public int ping(int t) {
        while (start &lt; end &amp;&amp; (t - records[start] &gt; 3000)) { 
            start++; // if the difference in time is greater than 3000ms, 
            // than increase the value of start unitl it's equal or less than 3000ms.
        }
        records[end++] = t; // Inserting the current time at the end
        return end - start; // Returning the answer including the element added just now.
    }
}

</code></pre>
<pre><code class="language-python">class RecentCounter:
    def __init__(self):
        self.records = []
        self.start = 0

    def ping(self, t: int) -&gt; int:
        self.records.append(t)
        while self.records[self.start] &lt; t - 3000:
            self.start += 1
        return len(self.records) - self.start

</code></pre>
<pre><code class="language-cpp">#include &lt;vector&gt;

class RecentCounter {
private:
    std::vector&lt;int&gt; records;
    int start;

public:
    RecentCounter() : start(0) {}

    int ping(int t) {
        records.push_back(t);
        while (records[start] &lt; t - 3000) {
            start++;
        }
        return records.size() - start;
    }
};

</code></pre></div>